function onYouTubePlayerAPIReady(){ytp.YTAPIReady||(ytp.YTAPIReady=!0,jQuery(document).trigger("YTAPIReady"))}"object"!=typeof ytp&&(ytp={}),function(jQuery,ytp){if(ytp.isDevice="ontouchstart"in window,!jQuery.browser){jQuery.browser={},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.msie=!1;var nAgt=navigator.userAgent;jQuery.browser.ua=nAgt,jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10);var nameOffset,verOffset,ix;if(-1!=(verOffset=nAgt.indexOf("Opera")))jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8));else if(-1!=(verOffset=nAgt.indexOf("MSIE")))jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=nAgt.substring(verOffset+5);else if(-1!=nAgt.indexOf("Trident")){jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer";var start=nAgt.indexOf("rv:")+3,end=start+4;jQuery.browser.fullVersion=nAgt.substring(start,end)}else-1!=(verOffset=nAgt.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))?(jQuery.browser.webkit=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?(jQuery.browser.webkit=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(jQuery.browser.name=nAgt.substring(nameOffset,verOffset),jQuery.browser.fullVersion=nAgt.substring(verOffset+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase()&&(jQuery.browser.name=navigator.appName));-1!=(ix=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),-1!=(ix=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion}jQuery.fn.CSSAnimate=function(a,b,c,d,e){return this.each(function(){var f=jQuery(this);if(0!==f.length&&a){if("function"==typeof b&&(e=b,b=jQuery.fx.speeds._default),"function"==typeof c&&(e=c,c=0),"function"==typeof d&&(e=d,d="cubic-bezier(0.65,0.03,0.36,0.72)"),"string"==typeof b)for(var g in jQuery.fx.speeds){if(b==g){b=jQuery.fx.speeds[g];break}b=null}if(jQuery.support.transition){var h="",i="transitionEnd";jQuery.browser.webkit?(h="-webkit-",i="webkitTransitionEnd"):jQuery.browser.mozilla?(h="-moz-",i="transitionend"):jQuery.browser.opera?(h="-o-",i="otransitionend"):jQuery.browser.msie&&(h="-ms-",i="msTransitionEnd"),g=[];for(k in a){var j=k;"transform"===j&&(j=h+"transform",a[j]=a[k],delete a[k]),"transform-origin"===j&&(j=h+"transform-origin",a[j]=a[k],delete a[k]),g.push(j),f.css(j)||f.css(j,0)}k=g.join(","),f.css(h+"transition-property",k),f.css(h+"transition-duration",b+"ms"),f.css(h+"transition-delay",c+"ms"),f.css(h+"transition-timing-function",d),f.css(h+"backface-visibility","hidden"),setTimeout(function(){f.css(a)},0),setTimeout(function(){f.called||!e?f.called=!1:e()},b+20),f.on(i,function(a){return f.off(i),f.css(h+"transition",""),a.stopPropagation(),"function"==typeof e&&(f.called=!0,e()),!1})}else{for(var k in a)"transform"===k&&delete a[k],"transform-origin"===k&&delete a[k],"auto"===a[k]&&delete a[k];e&&"string"!=typeof e||(e="linear"),f.animate(a,b,e)}}})},jQuery.fn.CSSAnimateStop=function(){var a="",b="transitionEnd";jQuery.browser.webkit?(a="-webkit-",b="webkitTransitionEnd"):jQuery.browser.mozilla?(a="-moz-",b="transitionend"):jQuery.browser.opera?(a="-o-",b="otransitionend"):jQuery.browser.msie&&(a="-ms-",b="msTransitionEnd"),jQuery(this).css(a+"transition",""),jQuery(this).off(b)},jQuery.support.transition=function(){var a=(document.body||document.documentElement).style;return void 0!==a.transition||void 0!==a.WebkitTransition||void 0!==a.MozTransition||void 0!==a.MsTransition||void 0!==a.OTransition}(),function(c){c.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(a,b){this.defaults.type=a,this.defaults.name=b},get:function(b,f){var d=c.extend({},this.defaults,f);d.single.length||(d.single="metadata");var a=c.data(b,d.single);if(a)return a;if(a="{}","class"==d.type){var e=d.cre.exec(b.className);e&&(a=e[1])}else if("elem"==d.type){if(!b.getElementsByTagName)return;e=b.getElementsByTagName(d.name),e.length&&(a=c.trim(e[0].innerHTML))}else void 0!=b.getAttribute&&(e=b.getAttribute(d.name))&&(a=e);return 0>a.indexOf("{")&&(a="{"+a+"}"),a=eval("("+a+")"),c.data(b,d.single,a),a}}}),c.fn.metadata=function(a){return c.metadata.get(this[0],a)}}(jQuery),String.prototype.getVideoID=function(){var a;return a="http://youtu.be/"==this.substr(0,16)?this.replace("http://youtu.be/",""):this.indexOf("http")>-1?this.match(/[\\?&]v=([^&#]*)/)[1]:this},jQuery.mbYTPlayer={name:"jquery.mb.YTPlayer",version:"2.6.0",author:"Matteo Bicocchi",defaults:{containment:"body",ratio:"4/3",showYTLogo:!1,videoURL:null,startAt:0,autoPlay:!0,vol:100,addRaster:!1,opacity:1,quality:"default",mute:!1,loop:!0,showControls:!0,showAnnotations:!1,printUrl:!0,stopMovieOnClick:!1,realfullscreen:!0,onReady:function(){},onStateChange:function(){},onPlaybackQualityChange:function(){},onError:function(){}},controls:{play:"P",pause:"p",mute:"M",unmute:"A",onlyYT:"O",showSite:"R",ytLogo:"Y"},rasterImg:"images/raster.png",rasterImgRetina:"images/raster@2x.png",locationProtocol:"file:"!=location.protocol?location.protocol:"http:",buildPlayer:function(options){return this.each(function(){var YTPlayer=this,$YTPlayer=jQuery(YTPlayer);YTPlayer.loop=0,YTPlayer.opt={};var property={};$YTPlayer.addClass("mb_YTVPlayer"),jQuery.metadata&&(jQuery.metadata.setType("class"),property=$YTPlayer.metadata()),jQuery.isEmptyObject(property)&&(property=$YTPlayer.data("property")&&"string"==typeof $YTPlayer.data("property")?eval("("+$YTPlayer.data("property")+")"):$YTPlayer.data("property")),jQuery.extend(YTPlayer.opt,jQuery.mbYTPlayer.defaults,options,property);var canGoFullscreen=!(jQuery.browser.msie||jQuery.browser.opera||self.location.href!=top.location.href);canGoFullscreen||(YTPlayer.opt.realfullscreen=!1),$YTPlayer.attr("id")||$YTPlayer.attr("id","id_"+(new Date).getTime()),YTPlayer.opt.id=YTPlayer.id,YTPlayer.isAlone=!1,YTPlayer.opt.isBgndMovie&&(YTPlayer.opt.containment="body"),YTPlayer.opt.isBgndMovie&&void 0!=YTPlayer.opt.isBgndMovie.mute&&(YTPlayer.opt.mute=YTPlayer.opt.isBgndMovie.mute),YTPlayer.opt.videoURL||(YTPlayer.opt.videoURL=$YTPlayer.attr("href"));var playerID="mbYTP_"+YTPlayer.id,videoID=this.opt.videoURL?this.opt.videoURL.getVideoID():!!$YTPlayer.attr("href")&&$YTPlayer.attr("href").getVideoID();YTPlayer.videoID=videoID,YTPlayer.opt.showAnnotations=YTPlayer.opt.showAnnotations?"0":"3";var playerVars={autoplay:0,modestbranding:1,controls:0,showinfo:0,rel:0,enablejsapi:1,version:3,playerapiid:playerID,origin:"*",allowfullscreen:!0,wmode:"transparent",iv_load_policy:YTPlayer.opt.showAnnotations},canPlayHTML5=!1,v=document.createElement("video");v.canPlayType&&(canPlayHTML5=!0),canPlayHTML5&&jQuery.extend(playerVars,{html5:1}),jQuery.browser.msie&&jQuery.browser.version<9&&(this.opt.opacity=1);var playerBox=jQuery("<div/>").attr("id",playerID).addClass("playerBox"),overlay=jQuery("<div/>").css({position:"absolute",top:0,left:0,width:"100%",height:"100%"}).addClass("YTPOverlay");if(YTPlayer.opt.containment=jQuery("self"==YTPlayer.opt.containment?this:YTPlayer.opt.containment),YTPlayer.isBackground="body"==YTPlayer.opt.containment.get(0).tagName.toLowerCase(),ytp.isDevice&&YTPlayer.isBackground)return void $YTPlayer.hide();if(YTPlayer.opt.addRaster){var retina=window.retina||window.devicePixelRatio>1;overlay.addClass(retina?"raster retina":"raster")}else overlay.removeClass("raster retina");var wrapper=jQuery("<div/>").addClass("mbYTP_wrapper").attr("id","wrapper_"+playerID);if(wrapper.css({position:"absolute",zIndex:0,minWidth:"100%",minHeight:"100%",left:0,top:0,overflow:"hidden",opacity:0}),playerBox.css({position:"absolute",zIndex:0,width:"100%",height:"100%",top:0,left:0,overflow:"hidden",opacity:this.opt.opacity}),wrapper.append(playerBox),!YTPlayer.isBackground||!ytp.isInit){if(YTPlayer.opt.containment.children().each(function(){"static"==jQuery(this).css("position")&&jQuery(this).css("position","relative")}),YTPlayer.isBackground?(jQuery("body").css({position:"relative",minWidth:"100%",minHeight:"100%",zIndex:1,boxSizing:"border-box"}),wrapper.css({position:"fixed",top:0,left:0,zIndex:0}),$YTPlayer.hide(),YTPlayer.opt.containment.prepend(wrapper)):YTPlayer.opt.containment.prepend(wrapper),YTPlayer.wrapper=wrapper,playerBox.css({opacity:1}),ytp.isDevice||(playerBox.after(overlay),YTPlayer.overlay=overlay),YTPlayer.isBackground||overlay.on("mouseenter",function(){$YTPlayer.find(".mb_YTVPBar").addClass("visible")}).on("mouseleave",function(){$YTPlayer.find(".mb_YTVPBar").removeClass("visible")}),ytp.YTAPIReady)setTimeout(function(){jQuery(document).trigger("YTAPIReady")},200);else{var tag=document.createElement("script");tag.src=jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/player_api",tag.id="YTAPI";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)}jQuery(document).on("YTAPIReady",function(){YTPlayer.isBackground&&ytp.isInit||YTPlayer.opt.isInit||(YTPlayer.isBackground&&YTPlayer.opt.stopMovieOnClick&&jQuery(document).off("mousedown.ytplayer").on("mousedown,.ytplayer",function(a){var b=jQuery(a.target);(b.is("a")||b.parents().is("a"))&&$YTPlayer.pauseYTP()}),YTPlayer.isBackground&&(ytp.isInit=!0),YTPlayer.opt.isInit=!0,YTPlayer.opt.vol=YTPlayer.opt.vol?YTPlayer.opt.vol:100,jQuery.mbYTPlayer.getDataFromFeed(YTPlayer.videoID,YTPlayer),jQuery(document).on("getVideoInfo_"+YTPlayer.opt.id,function(){return ytp.isDevice&&!YTPlayer.isBackground?void new YT.Player(playerID,{height:"100%",width:"100%",videoId:YTPlayer.videoID,events:{onReady:function(){$YTPlayer.optimizeDisplay(),playerBox.css({opacity:1}),YTPlayer.wrapper.css({opacity:1}),$YTPlayer.optimizeDisplay()},onStateChange:function(){}}}):void new YT.Player(playerID,{videoId:YTPlayer.videoID.toString(),playerVars:playerVars,events:{onReady:function(a){YTPlayer.player=a.target,YTPlayer.isReady||(YTPlayer.isReady=!0,YTPlayer.playerEl=YTPlayer.player.getIframe(),$YTPlayer.optimizeDisplay(),YTPlayer.videoID=videoID,jQuery(window).on("resize.YTP",function(){$YTPlayer.optimizeDisplay()}),YTPlayer.opt.showControls&&jQuery(YTPlayer).buildYTPControls(),YTPlayer.player.setPlaybackQuality(YTPlayer.opt.quality),YTPlayer.opt.startAt>0&&YTPlayer.player.seekTo(parseFloat(YTPlayer.opt.startAt),!0),YTPlayer.opt.autoPlay?($YTPlayer.playYTP(),YTPlayer.player.setVolume(YTPlayer.opt.vol),YTPlayer.opt.mute?jQuery(YTPlayer).muteYTPVolume():jQuery(YTPlayer).unmuteYTPVolume()):(YTPlayer.player.pauseVideo(),YTPlayer.checkForStartAt=setInterval(function(){YTPlayer.player.getCurrentTime()>=YTPlayer.opt.startAt&&(clearInterval(YTPlayer.checkForStartAt),YTPlayer.opt.mute?jQuery(YTPlayer).muteYTPVolume():jQuery(YTPlayer).unmuteYTPVolume())},1)),"function"==typeof YTPlayer.opt.onReady&&YTPlayer.opt.onReady($YTPlayer),jQuery.mbYTPlayer.checkForState(YTPlayer))},onStateChange:function(a){if("function"==typeof a.target.getPlayerState){var b=a.target.getPlayerState();"function"==typeof YTPlayer.opt.onStateChange&&YTPlayer.opt.onStateChange($YTPlayer,b);var c=(jQuery(YTPlayer.playerEl),jQuery("#controlBar_"+YTPlayer.id)),d=YTPlayer.opt;if(0==b){if(YTPlayer.state==b)return;YTPlayer.state=b,YTPlayer.player.pauseVideo();var e=YTPlayer.opt.startAt?YTPlayer.opt.startAt:1;d.loop?(YTPlayer.wrapper.css({opacity:0}),$YTPlayer.playYTP(),YTPlayer.player.seekTo(e,!0)):YTPlayer.isBackground||(YTPlayer.player.seekTo(e,!0),$YTPlayer.playYTP(),setTimeout(function(){$YTPlayer.pauseYTP()},10)),!d.loop&&YTPlayer.isBackground?YTPlayer.wrapper.CSSAnimate({opacity:0},2e3):d.loop&&(YTPlayer.wrapper.css({opacity:0}),YTPlayer.loop++),c.find(".mb_YTVPPlaypause").html(jQuery.mbYTPlayer.controls.play),jQuery(YTPlayer).trigger("YTPEnd")}if(3==b){if(YTPlayer.state==b)return;YTPlayer.state=b,c.find(".mb_YTVPPlaypause").html(jQuery.mbYTPlayer.controls.play),jQuery(YTPlayer).trigger("YTPBuffering")}if(-1==b){if(YTPlayer.state==b)return;YTPlayer.state=b,YTPlayer.wrapper.css({opacity:0}),jQuery(YTPlayer).trigger("YTPUnstarted")}if(1==b){if(YTPlayer.state==b)return;YTPlayer.state=b,YTPlayer.player.setPlaybackQuality(YTPlayer.opt.quality),YTPlayer.opt.mute&&($YTPlayer.muteYTPVolume(),YTPlayer.opt.mute=!1),YTPlayer.opt.autoPlay&&0==YTPlayer.loop?YTPlayer.wrapper.CSSAnimate({opacity:YTPlayer.isAlone?1:YTPlayer.opt.opacity},2e3):YTPlayer.isBackground?setTimeout(function(){jQuery(YTPlayer.playerEl).CSSAnimate({opacity:1},2e3),YTPlayer.wrapper.CSSAnimate({opacity:YTPlayer.opt.opacity},2e3)},1e3):(YTPlayer.wrapper.css({opacity:YTPlayer.isAlone?1:YTPlayer.opt.opacity}),$YTPlayer.css({background:"rgba(0,0,0,0.5)"})),c.find(".mb_YTVPPlaypause").html(jQuery.mbYTPlayer.controls.pause),jQuery(YTPlayer).trigger("YTPStart"),"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","YTPlayer","Play",YTPlayer.title||YTPlayer.videoID.toString()])}if(2==b){if(YTPlayer.state==b)return;YTPlayer.state=b,c.find(".mb_YTVPPlaypause").html(jQuery.mbYTPlayer.controls.play),jQuery(YTPlayer).trigger("YTPPause")}}},onPlaybackQualityChange:function(){"function"==typeof YTPlayer.opt.onPlaybackQualityChange&&YTPlayer.opt.onPlaybackQualityChange($YTPlayer)},onError:function(a){2==a.data&&YTPlayer.isPlayList&&jQuery(YTPlayer).playNext(),"function"==typeof YTPlayer.opt.onError&&YTPlayer.opt.onError($YTPlayer,a)}}})}))})}})},getDataFromFeed:function(a,b){b.videoID=a,jQuery.browser.msie?("auto"==b.opt.ratio?b.opt.ratio="16/9":b.opt.ratio,b.isInit||(b.isInit=!0,setTimeout(function(){jQuery(document).trigger("getVideoInfo_"+b.opt.id)},100)),jQuery(b).trigger("YTPChanged")):(jQuery.getJSON(jQuery.mbYTPlayer.locationProtocol+"//gdata.youtube.com/feeds/api/videos/"+a+"?v=2&alt=jsonc",function(a){b.dataReceived=!0;var c=a.data;if(b.title=c.title,b.videoData=c,"auto"==b.opt.ratio&&(b.opt.ratio=c.aspectRatio&&"widescreen"===c.aspectRatio?"16/9":"4/3"),!b.isInit){if(b.isInit=!0,!b.isBackground){var d=b.videoData.thumbnail.hqDefault;jQuery(b).css({background:"rgba(0,0,0,0.5) url("+d+") center center",backgroundSize:"cover"})}jQuery(document).trigger("getVideoInfo_"+b.opt.id)}jQuery(b).trigger("YTPChanged")}),setTimeout(function(){b.dataReceived||b.isInit||(b.isInit=!0,jQuery(document).trigger("getVideoInfo_"+b.opt.id))},2500))},getVideoID:function(){var a=this.get(0);return a.videoID||!1},setVideoQuality:function(a){var b=this.get(0);b.player.setPlaybackQuality(a)},YTPlaylist:function(a,b,c){var d=this.get(0);d.isPlayList=!0,b&&(a=jQuery.shuffle(a)),d.videoID||(d.videos=a,d.videoCounter=0,d.videoLength=a.length,jQuery(d).data("property",a[0]),jQuery(d).mb_YTPlayer()),"function"==typeof c&&jQuery(d).on("YTPChanged",function(){c(d)}),jQuery(d).on("YTPEnd",function(){jQuery(d).playNext()})},playNext:function(){var a=this.get(0);a.videoCounter++,a.videoCounter>=a.videoLength&&(a.videoCounter=0),jQuery(a.playerEl).css({opacity:0}),jQuery(a).changeMovie(a.videos[a.videoCounter])},playPrev:function(){var a=this.get(0);a.videoCounter--,a.videoCounter<=0&&(a.videoCounter=a.videoLength),jQuery(a.playerEl).css({opacity:0}),jQuery(a).changeMovie(a.videos[a.videoCounter])},changeMovie:function(a){var b=this.get(0),c=b.opt;a&&jQuery.extend(c,a),b.videoID=c.videoURL.getVideoID(),jQuery(b).pauseYTP();var d=jQuery.browser.msie?1e3:0;if(jQuery(b).getPlayer().cueVideoByUrl(encodeURI(jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/v/"+b.videoID),5,b.opt.quality),setTimeout(function(){jQuery(b).playYTP(),jQuery(b).one("YTPStart",function(){jQuery(b.playerEl).CSSAnimate({opacity:1},2e3)})},d),b.opt.mute?jQuery(b).muteYTPVolume():jQuery(b).unmuteYTPVolume(),b.opt.addRaster){var e=window.retina||window.devicePixelRatio>1;b.overlay.addClass(e?"raster retina":"raster")}else b.overlay.removeClass("raster"),b.overlay.removeClass("retina");jQuery("#controlBar_"+b.id).remove(),b.opt.showControls&&jQuery(b).buildYTPControls(),jQuery.mbYTPlayer.getDataFromFeed(b.videoID,b),jQuery(b).optimizeDisplay(),jQuery.mbYTPlayer.checkForState(b)},getPlayer:function(){return jQuery(this).get(0).player},playerDestroy:function(){var a=this.get(0);ytp.YTAPIReady=!1,ytp.isInit=!1,a.opt.isInit=!1,a.videoID=null;var b=a.wrapper;b.remove(),jQuery("#controlBar_"+a.id).remove()},fullscreen:function(a){function b(a,b){for(var c,d,e=["webkit","moz","ms","o",""],f=0;f<e.length&&!a[c];){if(c=b,""==e[f]&&(c=c.substr(0,1).toLowerCase()+c.substr(1)),c=e[f]+c,d=typeof a[c],"undefined"!=d)return e=[e[f]],"function"==d?a[c]():a[c];f++}}function c(a){b(a,"RequestFullScreen")}function d(){(b(document,"FullScreen")||b(document,"IsFullScreen"))&&b(document,"CancelFullScreen")}var e=this.get(0),f=jQuery("#controlBar_"+e.id),g=f.find(".mb_OnlyYT"),h=jQuery(e.wrapper);if(a){var i=jQuery.browser.mozilla?"mozfullscreenchange":jQuery.browser.webkit?"webkitfullscreenchange":"fullscreenchange";jQuery(document).off(i),jQuery(document).on(i,function(){var a=b(document,"IsFullScreen")||b(document,"FullScreen");a?jQuery(e).setVideoQuality("default"):(jQuery(e).removeClass("fullscreen"),e.isAlone=!1,g.html(jQuery.mbYTPlayer.controls.onlyYT),jQuery(e).setVideoQuality(e.opt.quality),e.isBackground?jQuery("body").after(f):e.wrapper.before(f),jQuery(window).resize())})}e.isAlone?(a?d():h.CSSAnimate({opacity:e.opt.opacity},500),jQuery(e).trigger("YTPFullScreenEnd"),h.css({zIndex:-1}),g.html(jQuery.mbYTPlayer.controls.onlyYT),e.isAlone=!1):(1!=e.player.getPlayerState()&&2!=e.player.getPlayerState()&&jQuery(e).playYTP(),a?(e.wrapper.append(f),jQuery(e).addClass("fullscreen"),c(h.get(0))):h.css({zIndex:1e4}).CSSAnimate({opacity:1},1e3,0),jQuery(e).trigger("YTPFullScreenStart"),g.html(jQuery.mbYTPlayer.controls.showSite),e.isAlone=!0)},playYTP:function(){var a=this.get(0),b=jQuery("#controlBar_"+a.id),c=b.find(".mb_YTVPPlaypause");c.html(jQuery.mbYTPlayer.controls.pause),a.player.playVideo(),a.wrapper.CSSAnimate({opacity:a.opt.opacity},2e3),jQuery(a).on("YTPStart",function(){jQuery(a).css("background","none")})},toggleLoops:function(){var a=this.get(0),b=a.opt;1==b.loop?b.loop=0:(b.startAt?a.player.seekTo(b.startAt):a.player.playVideo(),b.loop=1)},stopYTP:function(){var a=this.get(0),b=jQuery("#controlBar_"+a.id),c=b.find(".mb_YTVPPlaypause");c.html(jQuery.mbYTPlayer.controls.play),a.player.stopVideo()},pauseYTP:function(){var a=this.get(0),b=(a.opt,jQuery("#controlBar_"+a.id)),c=b.find(".mb_YTVPPlaypause");c.html(jQuery.mbYTPlayer.controls.play),a.player.pauseVideo()},seekToYTP:function(a){var b=this.get(0);b.player.seekTo(a,!0)},setYTPVolume:function(a){var b=this.get(0);a||b.opt.vol||0!=player.getVolume()?!a&&b.player.getVolume()>0||a&&b.player.getVolume()==a?jQuery(b).muteYTPVolume():b.opt.vol=a:jQuery(b).unmuteYTPVolume(),b.player.setVolume(b.opt.vol)},muteYTPVolume:function(){var a=this.get(0);a.opt.vol=a.player.getVolume()||50,a.player.mute(),a.player.setVolume(0);var b=jQuery("#controlBar_"+a.id),c=b.find(".mb_YTVPMuteUnmute");c.html(jQuery.mbYTPlayer.controls.unmute)},unmuteYTPVolume:function(){var a=this.get(0);a.player.unMute(),a.player.setVolume(a.opt.vol);var b=jQuery("#controlBar_"+a.id),c=b.find(".mb_YTVPMuteUnmute");c.html(jQuery.mbYTPlayer.controls.mute)},manageYTPProgress:function(){var a=this.get(0),b=jQuery("#controlBar_"+a.id),c=b.find(".mb_YTVPProgress"),d=b.find(".mb_YTVPLoaded"),e=b.find(".mb_YTVTime"),f=c.outerWidth(),g=Math.floor(a.player.getCurrentTime()),h=Math.floor(a.player.getDuration()),i=g*f/h,j=0,k=100*a.player.getVideoLoadedFraction();return d.css({left:j,width:k+"%"}),e.css({left:0,width:i}),{totalTime:h,currentTime:g}},buildYTPControls:function(){var a=this.get(0),b=a.opt;if(!jQuery("#controlBar_"+a.id).length){var c=jQuery("<span/>").attr("id","controlBar_"+a.id).addClass("mb_YTVPBar").css({whiteSpace:"noWrap",position:a.isBackground?"fixed":"absolute",zIndex:a.isBackground?1e4:1e3}).hide(),d=jQuery("<div/>").addClass("buttonBar"),e=jQuery("<span>"+jQuery.mbYTPlayer.controls.play+"</span>").addClass("mb_YTVPPlaypause ytpicon").click(function(){1==a.player.getPlayerState()?jQuery(a).pauseYTP():jQuery(a).playYTP()}),f=jQuery("<span>"+jQuery.mbYTPlayer.controls.mute+"</span>").addClass("mb_YTVPMuteUnmute ytpicon").click(function(){0==a.player.getVolume()?jQuery(a).unmuteYTPVolume():jQuery(a).muteYTPVolume()}),g=jQuery("<span/>").addClass("mb_YTVPTime"),h=b.videoURL;h.indexOf("http")<0&&(h=jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/watch?v="+b.videoURL);var i=jQuery("<span/>").html(jQuery.mbYTPlayer.controls.ytLogo).addClass("mb_YTVPUrl ytpicon").attr("title","view on YouTube").on("click",function(){window.open(h,"viewOnYT")}),j=jQuery("<span/>").html(jQuery.mbYTPlayer.controls.onlyYT).addClass("mb_OnlyYT ytpicon").on("click",function(){jQuery(a).fullscreen(b.realfullscreen)}),k=jQuery("<div/>").addClass("mb_YTVPProgress").css("position","absolute").click(function(b){m.css({width:b.clientX-m.offset().left}),a.timeW=b.clientX-m.offset().left,c.find(".mb_YTVPLoaded").css({width:0});var d=Math.floor(a.player.getDuration());a.goto=m.outerWidth()*d/k.outerWidth(),a.player.seekTo(parseFloat(a.goto),!0),c.find(".mb_YTVPLoaded").css({width:0})}),l=jQuery("<div/>").addClass("mb_YTVPLoaded").css("position","absolute"),m=jQuery("<div/>").addClass("mb_YTVTime").css("position","absolute");k.append(l).append(m),d.append(e).append(f).append(g),b.printUrl&&d.append(i),(a.isBackground||a.opt.realfullscreen&&!a.isBackground)&&d.append(j),c.append(d).append(k),a.isBackground?jQuery("body").after(c):(c.addClass("inlinePlayer"),a.wrapper.before(c)),c.fadeIn()}},checkForState:function(a){var b=jQuery("#controlBar_"+a.id),c=a.opt,d=a.opt.startAt?a.opt.startAt:1;a.getState=setInterval(function(){var e=jQuery(a).manageYTPProgress();b.find(".mb_YTVPTime").html(jQuery.mbYTPlayer.formatTime(e.currentTime)+" / "+jQuery.mbYTPlayer.formatTime(e.totalTime)),parseFloat(a.player.getDuration()-3)<a.player.getCurrentTime()&&1==a.player.getPlayerState()&&!a.isPlayList&&(c.loop?a.player.seekTo(d):(a.player.pauseVideo(),a.wrapper.CSSAnimate({opacity:0},2e3,function(){if(a.player.seekTo(d,!0),!a.isBackground){var b=a.videoData.thumbnail.hqDefault;jQuery(a).css({background:"rgba(0,0,0,0.5) url("+b+") center center",backgroundSize:"cover"})}})),jQuery(a).trigger("YTPEnd"))},1)},formatTime:function(a){var b=Math.floor(a/60),c=Math.floor(a-60*b);return(9>b?"0"+b:b)+" : "+(9>c?"0"+c:c)}},jQuery.fn.toggleVolume=function(){var a=this.get(0);if(a)return a.player.isMuted()?(jQuery(a).unmuteYTPVolume(),!0):(jQuery(a).muteYTPVolume(),!1)},jQuery.fn.optimizeDisplay=function(){var a=this.get(0),b=a.opt,c=jQuery(a.playerEl),d={},e=a.isBackground?jQuery(window):b.containment;d.width=e.width(),d.height=e.height();var f=24,g={};g.width=d.width+d.width*f/100,g.height=Math.ceil("16/9"==b.ratio?9*d.width/16:3*d.width/4),g.marginTop=-((g.height-d.height)/2),g.marginLeft=-(d.width*(f/2)/100),g.height<d.height&&(g.height=d.height+d.height*f/100,g.width=Math.floor("16/9"==b.ratio?16*d.height/9:4*d.height/3),g.marginTop=-(d.height*(f/2)/100),g.marginLeft=-((g.width-d.width)/2)),c.css({width:g.width,height:g.height,marginTop:g.marginTop,marginLeft:g.marginLeft})},jQuery.shuffle=function(a){for(var b=a.slice(),c=b.length,d=c;d--;){var e=parseInt(Math.random()*c),f=b[d];b[d]=b[e],b[e]=f}return b},jQuery.fn.mb_YTPlayer=jQuery.mbYTPlayer.buildPlayer,jQuery.fn.YTPlaylist=jQuery.mbYTPlayer.YTPlaylist,jQuery.fn.playNext=jQuery.mbYTPlayer.playNext,jQuery.fn.playPrev=jQuery.mbYTPlayer.playPrev,jQuery.fn.changeMovie=jQuery.mbYTPlayer.changeMovie,jQuery.fn.getVideoID=jQuery.mbYTPlayer.getVideoID,jQuery.fn.getPlayer=jQuery.mbYTPlayer.getPlayer,jQuery.fn.playerDestroy=jQuery.mbYTPlayer.playerDestroy,jQuery.fn.fullscreen=jQuery.mbYTPlayer.fullscreen,jQuery.fn.buildYTPControls=jQuery.mbYTPlayer.buildYTPControls,jQuery.fn.playYTP=jQuery.mbYTPlayer.playYTP,jQuery.fn.toggleLoops=jQuery.mbYTPlayer.toggleLoops,jQuery.fn.stopYTP=jQuery.mbYTPlayer.stopYTP,jQuery.fn.pauseYTP=jQuery.mbYTPlayer.pauseYTP,jQuery.fn.seekToYTP=jQuery.mbYTPlayer.seekToYTP,jQuery.fn.muteYTPVolume=jQuery.mbYTPlayer.muteYTPVolume,jQuery.fn.unmuteYTPVolume=jQuery.mbYTPlayer.unmuteYTPVolume,jQuery.fn.setYTPVolume=jQuery.mbYTPlayer.setYTPVolume,jQuery.fn.setVideoQuality=jQuery.mbYTPlayer.setVideoQuality,jQuery.fn.manageYTPProgress=jQuery.mbYTPlayer.manageYTPProgress}(jQuery,ytp);