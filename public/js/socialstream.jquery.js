!function(a){a.fn.socialstream=function(b){var c={socialnetwork:"flickr",username:"pixel-industry",limit:6,overlay:!0,apikey:!1,accessToken:"",picasaAlbumId:""},b=a.extend(c,b);return this.each(function(){function c(c){a.get("https://www.googleapis.com/youtube/v3/playlistItems",{part:"snippet",maxResults:b.limit,playlistId:c,key:b.apikey},function(c){var e='<ul class="youtube-list">';a.each(c.items,function(c,d){var f=d.snippet.thumbnails.default.url,g="";if(!f)return!1;var h=(a("<div></div>"),"https://www.youtube.com/watch?v="+d.snippet.resourceId.videoId),i=d.snippet.title;if(b.overlay)var g='<div class="img-overlay"></div>';e+='<li><a target="_blank" href="'+h+'" title="'+i+'"><img src="'+f+'"/>'+g+"</a></li>"}),e+="</ul>",a(d).append(e)})}var d=a(this);switch(b.socialnetwork){case"flickr":d.append('<ul class="flickr-list"></ul>'),a.getJSON("https://api.flickr.com/services/rest/?method=flickr.people.findByUsername&username="+b.username+"&format=json&api_key=32ff8e5ef78ef2f44e6a1be3dbcf0617&jsoncallback=?",function(c){var e=c.user.nsid;a.getJSON("https://api.flickr.com/services/rest/?method=flickr.photos.search&user_id="+e+"&format=json&api_key=85145f20ba1864d8ff559a3971a0a033&per_page="+b.limit+"&page=1&extras=url_sq&jsoncallback=?",function(c){a.each(c.photos.photo,function(c,e){var f=e.owner,g=e.title,h=e.url_sq,i=e.id,j="https://www.flickr.com/photos/"+f+"/"+i,k=a("<img/>").attr({src:h,alt:g}),l=a("<a/>").attr({href:j,target:"_blank",title:g}),m=a(l).append(k);if(b.overlay){var n=a("<div/>").addClass("img-overlay");a(l).append(n)}var o=a("<li/>").append(m);a("ul",d).append(o)})})});break;case"pinterest":var e="http://pinterest.com/"+b.username+"/feed.rss",f="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=?&q="+encodeURIComponent(e)+"&num="+b.limit+"&output=json_xml";a.getJSON(f,function(c){if(200==c.responseStatus){var e=c.responseData.feed,f="";if(!e)return!1;for(var g='<ul class="pinterest-list">',h=0;h<e.entries.length;h++){var i=e.entries[h],j=a("<div></div>");j.append(i.content);var k="http://www.pinterest.com"+j.find("a").attr("href"),l=j.find("img").attr("src"),m=j.find("p:nth-child(2)").html();if(b.overlay)var f='<div class="img-overlay"></div>';g+='<li><a target="_blank" href="'+k+'" title="'+m+'"><img src="'+l+'"/>'+f+"</a></li>"}g+="</ul>",a(d).append(g)}});break;case"instagram":if(d.append('<ul class="instagram-list"></ul>'),"undefined"==typeof b.accessToken||""==b.accessToken)return void console.warn("Instagram Access Token is not set. Please enter it in plugin init call.");var g=b.accessToken;e="https://api.instagram.com/v1/users/search?q="+b.username+"&access_token="+g+"&count=1&callback=?",a.getJSON(e,function(c){a.each(c.data,function(c,f){var h=f.username;if(h==b.username){var i=f.id;""!=i&&(e="https://api.instagram.com/v1/users/"+i+"/media/recent/?access_token="+g+"&count="+b.limit+"&callback=?",a.getJSON(e,function(c){a.each(c.data,function(c,e){var f=e.images.thumbnail.url,g=e.link,h="";null!=e.caption&&(h=e.caption.text);var i=a("<img/>").attr({src:f,alt:h}),j=a("<a/>").attr({href:g,target:"_blank",title:h}),k=a(j).append(i);if(b.overlay){var l=a("<div/>").addClass("img-overlay");a(j).append(l)}var m=a("<li/>").append(k);a("ul",d).append(m)})}))}})});break;case"dribbble":if(d.append('<ul class="dribbble-list"></ul>'),"undefined"==typeof b.accessToken||""==b.accessToken)return void console.warn("Dribbble Access Token is not set. Please enter it in plugin init call.");var g=b.accessToken;a.getJSON("https://api.dribbble.com/v1/users/"+b.username+"/shots?access_token="+g+"&callback=?",function(c){a.each(c.data,function(c,e){if(c<b.limit){var f=e.title,g=a("<img/>").attr({src:e.images.teaser,alt:f}),h=a("<a/>").attr({href:e.html_url,target:"_blank",title:f}),i=a(h).append(g);if(b.overlay){var j=a("<div/>").addClass("img-overlay");a(h).append(j)}var k=a("<li/>").append(i);a("ul",d).append(k)}})});break;case"deviantart":var e="http://backend.deviantart.com/rss.xml?type=deviation&q=by%3A"+b.username+"+sort%3Atime+meta%3Aall",f="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=?&q="+encodeURIComponent(e)+"&num="+b.limit+"&output=json_xml";a.getJSON(f,function(c){if(200==c.responseStatus){var e=c.responseData.feed,f="";if(!e)return!1;for(var g='<ul class="deviantart-list">',h=0;h<e.entries.length;h++){var i=e.entries[h],j=a("<div></div>");j.append(i.content);var k=i.link,l=j.find("img").attr("src");if(!(l.indexOf("smile.gif")>=0)){var m=i.title.replace(/.jpg/g,"").replace(/-/g," ").replace(/_/g," ");if(b.overlay)var f='<div class="img-overlay"></div>';g+='<li><a target="_blank" href="'+k+'" title="'+m+'"><img src="'+l+'"/>'+f+"</a></li>"}}g+="</ul>",a(d).append(g)}});break;case"picasa":var e="https://picasaweb.google.com/data/feed/base/user/"+b.username+"/album/"+b.picasaAlbumId+"?kind=photo&access=public&alt=json-in-script&imgmax="+b.limit+"&callback=?";a.getJSON(e,function(c){if(c.feed.entry.length>0){var e=c.feed.entry,f="",g='<ul class="picasa-list">';a.each(e,function(a,c){var d=c.media$group.media$thumbnail[2].url,e=(c.media$group.media$description.$t,c.media$group.media$title.$t),f=c.link[1].href,h=e.replace(/.jpg/g,"").replace(/.JPG/g,"").replace(/-/g," ").replace(/_/g," ");if(b.overlay)var i='<div class="img-overlay"></div>';g+='<li><a target="_blank" href="'+f+'" title="'+h+'"><img src="'+d+'"/>'+i+"</a></li>"});for(var h=0;h<e;h++){var i=e[h],j=a("<div></div>");j.append(i.content);var k=i.link,l=j.find("img").attr("src"),m=i.title.replace(/.jpg/g,"").replace(/-/g," ").replace(/_/g," ");if(b.overlay)var f='<div class="img-overlay"></div>';g+='<li><a target="_blank" href="'+k+'" title="'+m+'"><img src="'+l+'"/>'+f+"</a></li>"}g+="</ul>",a(d).append(g)}});break;case"youtube":var h;b.apikey&&a.get("https://www.googleapis.com/youtube/v3/channels",{part:"contentDetails",id:b.username,key:b.apikey},function(b){a.each(b.items,function(a,b){h=b.contentDetails.relatedPlaylists.uploads,c(h)})});break;case"newsfeed":var f="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=?&q="+encodeURIComponent(b.username)+"&num="+b.limit+"&output=json_xml";a.getJSON(f,function(c){if(200==c.responseStatus){var e=c.responseData.feed,f="";if(!e)return!1;for(var g='<ul class="social-feed">',h=0;h<e.entries.length;h++){var i=e.entries[h],j=a("<div></div>");j.append(i.content);var k=i.link,l=j.find("img").attr("src"),m=i.title.replace(/.jpg/g,"").replace(/-/g," ").replace(/_/g," ");if(b.overlay)var f='<div class="img-overlay"></div>';g+='<li><a target="_blank" href="'+k+'" title="'+m+'"><img src="'+l+'"/>'+f+"</a></li>"}g+="</ul>",a(d).append(g)}})}})}}(jQuery);